format_version: "11"
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git

workflows:
  check:
    steps:
    - git::https://github.com/bitrise-steplib/steps-check.git: {}

  e2e:
    steps:
      - script:
          inputs:
            - content: |-
                set -ex
                if [[ "$BITRISEIO_STACK_ID" != "linux-docker-android" ]]; then
                  envman add --key RUN_E2E --value "yes"
                fi
      - git::https://github.com/bitrise-steplib/steps-check.git:
          run_if: '{{enveq "RUN_E2E" "yes"}}'
          inputs:
            - workflow: e2e

  sample:
    steps:
      - path::./:
          title: Current Step
          inputs:
          - profile: pixel_2
          - api_level: "30"
      - wait-for-android-emulator: {}

  test:
    after_run:
    - check
    - e2e